<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dinner.dao.order.OrderDao">
    <!--查询所有菜品-->
    <select id="goodList" resultType="map">
        select * from tab_food
    </select>

    <!--查询所有菜品-->
    <select id="goodListC" resultType="map">
        select * from tab_food
    </select>

    <!--新增消费记录-->
    <insert id="order" parameterType="map">
    <!--获取新增的主键ID-->
    <selectKey resultType="INTEGER" order="BEFORE" keyProperty="orderId">
        SELECT SEQ_TAB_ORDER_ID.NEXTVAL as orderId from DUAL
    </selectKey>

        insert into TAB_CONSUME(CON_ID,CON_TYPE,CON_TIME,CON_ROOM,CON_PERSON,CON_STATE) values(#{orderId},#{contrller},sysdate,#{number},#{person},0)
    </insert>

    <!--开桌-->
    <update id="update">
        update TAB_TABLE set TAB_STATE=1 where TAB_ID=#{number}
    </update>

    <!--增加消费-->
    <insert id="insertChoose">
        insert into TAB_CON_RECORD(CON_ID,CON_GOODS)
        <foreach collection="list"  index="index" item="item" separator="union all">
            SELECT
            #{item.num},#{item.id}
            FROM dual
        </foreach>
    </insert>

    <!--结账-->
    <select id="">

    </select>
</mapper>