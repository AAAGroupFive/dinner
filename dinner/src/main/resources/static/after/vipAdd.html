<!DOCTYPE html>
<html>
	<head>
    <meta charset="UTF-8">
    <title>欢迎页面-X-admin2.0</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,user-scalable=yes, minimum-scale=0.4, initial-scale=0.8,target-densitydpi=low-dpi" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" href="/dinner/css/font.css">
    <link rel="stylesheet" href="/dinner/css/xadmin.css">
    <script type="text/javascript" src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript" src="/dinner/lib/layui/layui.js" charset="utf-8"></script>
    <script type="text/javascript" src="/dinner/js/xadmin.js"></script>
    <script type="text/javascript" src="/dinner/js/address.js" ></script>
    <script type="text/javascript" src="/dinner/js/jquery.min.js" ></script>
    <!-- 让IE8/9支持媒体查询，从而兼容栅格 -->
    <!--[if lt IE 9]>
      <script src="https://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
      <script src="https://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
	<body>
		<form class="layui-form layui-form-pane">
		 
		  
		    <div class="layui-form-item" pane>
			    <label class="layui-form-label">会员姓名</label>
			    <div class="layui-input-block">
			      <input type="text" id="VIPname" name="VIPname" lay-verify="required" class="layui-input">
			    </div>
		    
		    </div>
		    <div class="layui-form-item" pane>
			    <label class="layui-form-label">手机号</label>
			    <div class="layui-input-block">
			      <input type="text" id="VIPnumber" name="VIPnumber" lay-verify="phone" class="layui-input">
			    </div>
		    
		    </div>
		    
		    <div class="layui-form-item" pane>
			    <label class="layui-form-label">会员卡号</label>
			    <div class="layui-input-block">
			      <input type="text" id="VIPcard" name="VIPcard" lay-verify="number" class="layui-input">
			    </div>
		    
		    </div>
		    

		    <div class="layui-form-item" pane>
			    <label class="layui-form-label">单选框</label>
			    <div class="layui-input-block">
			      <input type="radio" name="sex" value="0" title="男">
			      <input type="radio" name="sex" value="1" title="女" checked>
			    </div>
		   	</div>
		   	
		   	<div class="layui-form-item" pane>
			    <label class="layui-form-label">操作员工</label>
			    <div class="layui-input-block">
			      	<input class="layui-input" id="EmpName" type="text" readonly/>
			    </div>
					    
		    </div>
		    
		    <div class="layui-form-item" pane>
			    <label class="layui-form-label">初始余额</label>
			    <div class="layui-input-block">
			      <input type="text" id="VIPbalance" name="VIPbalance" lay-verify="number" class="layui-input">
			    </div>
		    
		    </div>
		    
		    <div class="layui-form-item" pane>
			    <label class="layui-form-label">联系地址</label>
			    <div class="layui-input-block">
			      <input type="text" id="VIPaddress" name="VIPaddress"  class="layui-input">
			    </div>
		    
		    </div>
		
		    <button class="layui-btn layui-btn-fluid" id="zhuce">注册会员</button>
		</form>

	</body>
	<script type="text/javascript">  
		

		//日期
    	layui.use('laydate', function(){
        var laydate = layui.laydate;
        
        //执行一个laydate实例
        laydate.render({
          elem: '#start' //指定元素
        });
      });




        $("#zhuce").click(function() {
            $.ajax({
                url: "/dinner/VIP/VipAdd",
                type: 'post',//method请求方式，get或者post
                dataType: 'json',//预期服务器返回的数据类型
                data: {
                    "VIPname":$("#VIPname").val(),
                    "VIPnumber":$("#VIPnumber").val(),
                    "VIPcard":$("#VIPcard").val(),
                    "VIPbalance":$("#VIPbalance").val(),
					"VIPaddress":$("#VIPaddress").val(),
					"sex":$('input:radio:checked').val()
				},//表格数据序列化

                success: function (data) {//res为相应体,function为回调函数
                    console.log(data.issuc);

                    if (data.issuc == true) {
                        alert(data.issuc);
                        layer.close(index);

                        layer.msg("修改成功", {icon: 6});

               		 }
                },
                error: function () {
                    layer.alert('操作失败！！！', {icon: 5});
                }
            });
        })




        $(function  () {
            $.ajax({
                url:"/dinner/VIP/GetSession",
                type:'post',//method请求方式，get或者post
                dataType:'json',//预期服务器返回的数据类型
                contentType: "application/json; charset=utf-8",

                success:function(res){//res为相应体,function为回调函数
                    $(this).val(""); //清空上次input框里的数据


                    var array = new Array();
				//遍历，先获取，然后map在array中是栈，先进后出，因此pop出来。

                    $.each(res,function(i,val){
                        array.push(val);
                    });
                    var q1 = JSON.stringify(array.pop());

                    $('#EmpName').val(q1);
                },
                error:function(){
                    layer.alert('操作失败！！！',{icon:5});
                }
            });


		})

	</script>

</html>
